### inventory

[webservers]
server1
server2
server3



### variables

downloads:
  - hostname: server1
    url: https://example.com/file1.txt
    dest: /path/to/file1.txt
  - hostname: server2
    url: https://example.com/file2.zip  # This URL has the .zip extension
    dest: /path/to/file2.zip
  - hostname: server3
    url: https://example.com/file3.pdf
    dest: /path/to/file3.pdf



### platbook

---
- hosts: all
  become: true
  tasks:
    - name: Download file for {{ item.hostname }}
      get_url:
        url: "{{ item.url }}"
        dest: "{{ item.dest }}"
      loop: "{{ downloads }}"

    - name: Extract file if URL ends with .zip
      archive:
        remote_src: yes
        src: "{{ item.url }}"
        extract: yes
      when: item.url.endswith('.zip')
      loop: "{{ downloads }}"
